---
title: 进程和线程的关系
type: "categories"
categories: 后端
---

# 区别
进程
- 有独立的堆栈空间和数据段，所以每当启动一个新的进程需要分配空间，所以比较奢侈，系统开销大，但是因为独立，所以进程安全性高，一个进程、
- 通信机制上，进程因为独立，通信机制复杂，如，管道、信号、消息队列、共享内存、套接字
线程
- 线程拥有独立的堆栈空间，但是共享数据段，彼此之间使用相同的地址空间，开销小，切换速度快，效率快
- cpu上，线程是cpu的基本单位，线程使cpu更加高效，操作系统会保证当前线程数不大于CPU的数目，不同的线程运行与不同的CPU上

# 联系

当一个进程中有多线程时，我们在其中一个线程fork下，创建新进程，子进程拥有父进程一样的内存和数据，但是**子进程不会像父进程是多线程的**

# 选择
- 需要频创建和销毁的，优先使用线程
- 大量计算，频发切换，耗时用线程
- cpu效率问题，多机分布用进程，多核分布用线程
- 稳定安全用进程，速度用线程

[参考](http://veaxen.com/?p=360)