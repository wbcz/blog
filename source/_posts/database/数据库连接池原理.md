---
title: 数据库连接池原理
type: "categories"
categories: 数据库
---

# 原始的数据库操作
- 初始化数据库连接
- 创建连接
- CURD操作
- 关闭连接

# 技术演进后的数据库连接池
频繁的与数据库进行连接和释放，加大了内存吞吐的开销，于是数据库连接池技术应运而生
- 预先在l连接池放入若干连接，当需要与数据库建立连接的时候，从缓存取出一个，使用完放回去，可以通过设定连接池最大连接数来防止系统无尽的与数据库连接

# 连接池实现的关键问题
## 并发
由于 Node.js 是单线程的，所以这个问题并不会给我们造成多大的困扰
## 多数据库服务器和多用户
## 事务处理
## 连接池的分配与释放
## 连接池的配置与维护
如何确保连接池中的最小连接数呢？有动态和静态两种策略。动态即每隔一定时间就对连接池进行检测，如果发现连接数量小于最小连接数，则补充相应数量的新连接以保证连接池的正常运转。静态是发现空闲连接不够时再去检查。

[参考](https://aidandai.github.io/posts/the-principle-of-database-connection-pool.html#1-原始的数据库操作)